## Этап 3

## Работа по курсу "Рефакторинг баз данных и приложений"
Выбран сценарий 1: Проектирование и разработка новой программной системы

Состав команды:
* Кравцова К.В, P34081
* Батомункуева В.Ж, P34101

Университет ИТМО, факультет ПИиКТ

г. Санкт-Петербург, 2025 год

## Описание проекта
https://github.com/themyav/flat-manager/blob/main/README.md

## Задачи этапа
1. Добавление допонительного функционала
2. Исправление ошибок этапа 2


### База данных
#### Добавление новой таблицы
#### Изменение таблицы «user»
* Изменен типа колонки **password** с ```char(255)``` на ```text```
    * Для хранения зашифрованного пароля

#### ER-диаграмма:
<img src="https://github.com/user-attachments/assets/c1c17749-af1c-42e3-9e52-47c13b0918d3" alt="Image description" width="50%">

### Back-end

#### Расширение функционала
* Добавлен контроллер для просмотра статистики, можно увидеть
  * статус платежей
  * историю платежей
* Создан сервис, отправляющий уведомления на почту, напоминая о предстоящем платеже по таймеру
* Шифрование паролей пользователей

#### Исправление функционала
* Исправлено удаление услуг
* Рефакторинг комментариев, ненужных импортов
* В swagger добавлены все контроллеры

### Front-end

#### Расширение функционала
* Добавление интерфейса статистики

#### Исправление функционала
* Отображение имени и фамилии пользователя
* Отображение неудачной регистрации 
* Отображение предупреждение о неверно введеном номере телефона
* Отображение дат

### Aglie

Была использована система мониторинга проектов YouTrack. Задачи этапа 3:

<img src="https://github.com/user-attachments/assets/3b11ea64-1fd5-41b1-bc0e-501028cf13f1" alt="Image description" width="50%">


## Результат работы

### Исходный код этапа 3

Pull Request отображает diff в коде между 2 и 3 этапом.

https://github.com/themyav/flat-manager/pull/21

### Главная страница: Отображние имени и фамилии 

<img src="https://github.com/user-attachments/assets/212a6913-6954-4e59-b041-6648526628e9" alt="Image description" width="50%">

### Регистрация: Предупреждение о неверно введенном номере телефона

<img src="https://github.com/user-attachments/assets/66531ee0-535a-4fe6-9676-fdbc00b84f71" alt="Image description" width="50%">

### Письмо с оповещением 

<img src="https://github.com/user-attachments/assets/48ad76f8-5d41-4c27-bdc2-6c398d59d832" alt="Image description">

### Хранение паролей в базе данных

<img src="https://github.com/user-attachments/assets/8b7ba34e-5458-437c-ac28-8984a50b2544" alt="Image description">


## Вывод

На 3 этапе мы добавили новый функционал для более удобного использования сервиса - теперь пользователям на почту буду присылаться напоминалка на почту о предстоящих дедлайнах оплаты услуг. Появилась возможность увидеть историю платежей со стоимостью, можно оценивать потребление энерегии/воды/газа.  Так же можно посмотреть статус всех платежей, увидеть сколько оплачено и сколько в сумме потрачено. Также были исправилены ошибки, выявленные на втором этапе.
